<template>	<div class="drag-frame"		 :style="frameStyles"		 @mousemove="onMouseMove"		 @mouseup="onMouseUp"		 @keydown.esc="onEscapePressed">	</div></template><script lang="ts">	import Component from "vue-class-component";	import Frame from "@/components/kernel/ui/Base/Frame.vue";	import {Watch} from "vue-property-decorator";	import {Size} from "@/components/kernel/ui/Base/Mixins/FrameSize.vue";	import Window from "@/components/kernel/ui/Components/Windows/Window.vue";	import {Point} from "@/components/kernel/ui/Windows/WindowProperties";	@Component({		data()		{			return {				window: null,				dragging: false,				windowOffset: null,				hidden: true,			}		}	})	export default class WindowDragHost extends Frame	{		public window: Window = null;		public cursorOffset: Point = null;		public dragging = false;		public hidden = true;		mounted()		{			this.hideDragHost();		}		protected onEscapePressed()		{			this.stopDragging();		}		protected stopDragging()		{			this.dragging = false;			this.window = null;			this.hideDragHost();		}		protected onMouseMove(mouseEvent: MouseEvent)		{			if(!this.dragging)				return;			this.setOffsetFromCursorPosition(mouseEvent);		}		protected onMouseUp(mouseEvent: MouseEvent)		{			if(!this.dragging)				return;			this.setOffsetFromCursorPosition(mouseEvent);			this.applyToWindow();		}		/**		 * Calculates the new window offset		 *		 * @param mouseEvent		 * @protected		 */		protected setOffsetFromCursorPosition(mouseEvent: MouseEvent)		{			this.frameSize.left = mouseEvent.clientX - this.cursorOffset.x;			this.frameSize.top = mouseEvent.clientY - this.cursorOffset.y;		}		protected applyToWindow()		{			this.window.frameSize.left = this.frameSize.left;			this.window.frameSize.top = this.frameSize.top;			this.stopDragging();		}		@Watch('window')		public windowChanged()		{			this.window === null				? this.hideDragHost()				: this.enableDragHost();		}		protected enableDragHost()		{			this.frameSize = Object.assign({}, this.window.frameSize);			this.dragging = true;			this.hidden = false;		}		public hideDragHost()		{			this.hidden = true;		}		get frameStyles()		{			const styles = this.getFrameStylesAsArray();			if(this.hidden)				styles.push('display:none');			return styles.join(';');		}	}</script>